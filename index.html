<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="" lang="">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <meta name="viewport" content="width=device-width,
      initial-scale=1.0, user-scalable=yes">
    <title>How to Host a Static Website with Nginx</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">How to Host a Static Website with Nginx</h1>
      <ul>
        <li>Devyn Freet</li>
        <li>English 202C</li>
        <li>April 6, 2023</li>
        <li>Dr. Latterell</li>
      </ul>
    </header>
    <figure>
      <img src="images/fig1_website.png" alt="website screenshot">
      <figcaption>Figure 1: Screenshot of website</figcaption>
    </figure>
    <h1 id="introduction">Introduction</h1>
    <h3 class="italic">Why should I have my own website?</h3>
    <p>
      There are several reasons you may want a personal website; whether you want 
      a blog, portfolio, cv, or just a place to tell the world about yourself 
      outside of traditional social media, a personal website is a great thing to 
      have. Having a personal website does not require that you host that site 
      yourself, and in fact most people don't host their own sites - many services 
      such as WordPress, Squarespace, and Wix.com offer people a fast, easy, and 
      affordable way to build and host a website, and for most people, a service 
      like this is probably the best option.
    </p>
    <h3 class="italic">Why would I want to host the site myself?</h3>
    <p>
      Realistically, most people probably don't. This guide is specifically 
      targeted at people who wish to better understand how the web works by 
      building a small piece of it themselves, and while this route can offer 
      a site that is lighter, faster, and gives you more granular control than 
      those built with the management systems mentioned above, the extra effort 
      probably isn't worth it unless you have a strong desire to learn and tinker. 
      For those who are willing to put in the effort, however, hosting your own 
      website can be incredibly rewarding and allows you to build something truly 
      unique without the limitations of hosting platforms.
    </p>
    <h3 class="italic">What is a static website and why might I want one?</h3>
    <p>
      Simply put, a static website is a website with fixed content built using 
      HTML, CSS, and possibly JavaScript. The alternative to a static website is a 
      dynamic website, which is what you're probably used to seeing with sites like 
      Twitter, Google, and Netflix. These sites are built with web frameworks like 
      React or Angular and dynamically serve content to users, which is why the 
      content you see is different every time you visit one of these sites. It is 
      important to note that static websites can still be responsive, 
      cross-platform, and can even have dynamic elements (though that's outside the 
      scope of this guide). The reason this guide focuses on static sites, aside 
      from their relative simplicity, is because they provide a strong, stable 
      foundation on which to build, tinker, and ultimately deepen your understanding 
      of the web.
    </p>
    <h3 class="italic">What should I already know?</h3>
    <p>
      This guide assumes that you have no experience with the tools and platforms 
      used. With that in mind, you should be very comfortable using a computer, and 
      you mustn't fear the command line - it is a powerful tool that makes 
      everything in this guide possible. Because this guide focuses on hosting 
      rather than designing a website, there won't be an explanation of how to 
      build your website with HTML and CSS; that said, there will be links to 
      external resources for that at the end of the guide.
    </p>
    <h3 class="italic">How long will this take?</h3>
    <p>
      Due to the nature of wireless networking, wait times between certain steps 
      can be unpredictable. You should expect to spend about two to three hours 
      getting your site set up (less if you're already familiar with the tools), 
      and many more hours tinkering and troubleshooting as you expand your site 
      into whatever you want it to be.
    </p>
    <h3>Important Technologies & Terminology</h3>
    <ul>
      <li><strong>HTTP</strong> (Hypertext Transfer Protocol) - HTTP is an internet
        protocol that delivers websites to web browsers.
      </li>
      <li><strong>SSH</strong> (Secure Shell Protocol) - SSH is a networking
        protocol that allows users to access a server remotely.
      </li>
      <li><strong>VPS</strong> (virtual private server) - A VPS is a cloud server 
        accessible remotely that can run the software required to host a website.
      </li>
      <li><strong>DigitalOcean</strong> - DigitalOcean is a cloud service 
        provider that offers virtual private servers (called droplets) for a monthly 
        fee. There are many alternatives available, including Linode and 
        OrangeWebsite.
      </li>
      <li><strong>Nginx</strong> (pronounced engine-x) - Nginx is a HTTP server, or 
        a piece of software that delivers a website to a visitor's browser.
      </li>
      <li><strong>Linux</strong> - Linux is an operating system that is used to run
        most web servers.
      </li>
      <li><strong>Bash</strong> - Bash is a command line interpreter that is used to 
        execute instructions in Linux.
      </li>
      <li><strong>HTML</strong> (HyperText Markup Language) - HTML is a markup 
        language used to create documents for the web.
      </li>
      <li><strong>CSS</strong> (Cascading Style Sheets) - CSS is a style language 
        used to layout the visual design of HTML documents.
      </li>
      <li><strong>JavaScript</strong> - JavaScript is a scripting language that runs
        in web browsers and is used to make websites more dynamic.
      </li>
      <li><strong>Domain Name</strong> - A domain name is a unique identifier for a 
        website that allows it to be easily accessed via a web browser 
        (E.g., example.com, wikipedia.org)
      </li>
      <li><strong>Subdomain</strong> - A subdomain is a string of text preceding a 
        website's main domain name. (E.g., <strong>www</strong>.example.com,
        <strong>en</strong>.wikipidea.org)
      </li>
      <li><strong>DNS</strong> (Domain Name System) - DNS is the naming system that 
        manages domain names and links them to web servers.
      </li>
      <li><strong>Symbolic Link</strong> - A symbolic link is a file that points to 
        a different file or directory on a computer, similar to shortcuts in Windows.
      </li>
      <li><strong>TLS</strong> (Transport Layer Security) - TLS is a security 
        protocol that encrypts data sent to websites to protect user privacy.
      </li>
      <li><strong>Certbot</strong> - Certbot is a command-line tool created by the 
        Electronic Frontier Foundation to simplify the process of setting up TLS 
        for a website.
      </li>
    </ul>
    <h3 id="warning">Warning!</h3>
    <p>
      This guide makes heavy use of bash, and specifically the sudo command, which 
      allows the user to run commands with elevated privileges. When following any 
      guide involving bash it is essential that you carefully check any command 
      involving sudo before executing, as this command allows you to do significant 
      damage to your system if used improperly.
    </p>
    <h3 id="caution">Caution</h3>
    <p>
      While this guide will follow basic security practices, there are many 
      security risks that come with hosting a website. You should never upload 
      anything to the web server that you wouldn't want publicly visible, and you 
      shouldn't attempt to handle user data without significant further research.
    </p>
    <h3 id="overview">Overview</h3>
    <p>
      These instructions will involve the following actions: 
      <ol>
        <li>Set up ssh on your device.</li>
        <li>Sign up for DigitalOcean and create a droplet.</li>
        <li>Install web hosting software on your server.</li>
        <li>Set up a domain name for your website.</li>
        <li>Configure Nginx for domain name.</li>
        <li>Set up TLS.</li>
        <li>Upload custom website files to server.</li>
      </ol>
    <h3 id="what-youll-need">What You'll Need</h3>
    <p>
      The only things you'll need to get started are a computer connected to the 
      internet and about $15. This guide will primarily target Windows users, but 
      everything here is possible on nearly any modern operating system. Over the 
      course of this guide, you'll have to pay about $5 per month for a server, and 
      about $10 per year for a domain name.
    </p>
    <h1>Steps</h1>
    <ol id="steps">
      <h2><li>SSH Setup</li></h2>
      <ol id="step1">
        <h3><li>Open a command line.</li></h3>
        <p>
          Open the command line for your operating system. To do this on Windows, 
          right click the start menu and click the <em>Windows PowerShell</em> 
          option (<em>Figure 2</em>).
        </p>
        <p class="note">
          <strong>Note</strong>: You should <strong>not</strong> 
          choose the option that says <em>Admin</em>, since admin privileges are 
          unnecessary here.
        </p>
        <p class="feedback">
          You should see the window in <em>Figure 3</em> once the command line opens.
        </p>
        <div class="row">
          <div class="smallcolumn">
            <figure>
              <img src="images/fig2_startOptions.png">
              <figcaption>Figure 2: Windows start options menu</figcaption>
            </figure>
          </div>
          <div class="bigcolumn">
            <figure>
              <img src="images/fig3_powershell.png">
              <figcaption>Figure 3: Windows PowerShell</figcaption>
            </figure>
          </div>
        </div>
        <h3><li>Generate SSH keys for authentication.</li></h3>
        <ol>
          <li>Type or copy/paste the following command in your command prompt</li>
          <code>ssh-keygen -t rsa</code>
          <li>Press enter to run the command.</li>
          <li>Press enter at each prompt, leaving the passphrase empty.</li>
          <p class="note">
            <strong>Note</strong>: You may set a passhprase if you'd like, but 
            setting a passphrase is unnecessary and not common practice.
          </p>
          <p class="feedback">
            See <em>Listing 1</em> for an example of how the output should look.
          </p>
          <figure>
            <code>
Generating public/private rsa key pair.  
Enter file in which to save the key (C:\Users\username/.ssh/id_rsa):  
Enter passphrase (empty for no passphrase):  
Enter same passphrase again:  
Your identification has been saved in C:\Users\username/.ssh/id_rsa.  
Your public key has been saved in C:\Users\username/.ssh/id_rsa.pub.  
The key fingerprint is:  
SHA256:GlK2Lb83XgTkk0PY40aFNtHY59gUFCQ6RfDDAB/OxKk username@hostname  
The key's randomart image is:  
+---[RSA 3072]----+  
|        .=O@=o=o |  
|        .O@Oo.o  |  
|      o  =%o+*   |  
|     o oE o=..o  |  
|    . + S.  .    |  
|     . =   .     |  
|      . .   .    |  
|         .o.     |  
|        .o..     |  
+----[SHA256]-----+
            </code>
            <figcaption>Listing 1: ssh-keygen output</figcaption>
          </figure>
        </ol>
      </ol>
      <h2><li>Server Creation</li></h2>
      <ol id="step2">
        <h3><li>Sign up for DigitalOcean</li></h3>
        <ol>
          <li>Go to <a href="https://www.digitalocean.com" target="_blank" rel="noopener noreferrer">
            digitalocean.com</a>.</li>
          <li>Click <em>Sign Up</em>.</li>
          <li>Follow the site's instructions to create your account.</li>
          <p class="note">
            <strong>Note</strong>: You will be required to enter payment information 
            and choose a project name.
          </p>
          <p class="feedback">
            Once your account has been created, you should see the dashboard in 
            <em>Figure 4</em>.
          </p>
          <figure>
            <img src="images/fig4_digitaloceanDash.png">
            <figcaption>Figure 4: DigitalOcean dashboard</figcaption>
          </figure>
        </ol>
        <h3><li>Set up a droplet.</li></h3>
        <div class="row">
          <div class="column">
            <ol>
              <li>Click the green <em>Create</em> button on the top right of the 
              dashboard (see <em>Figure 5</em>).</li>
              <li>Click <em>Droplets</em> in the drop-down menu that appears.</li>
              <li>Choose options for your droplet based on the following guidelines:</li>
              <ul>
                <li><strong>Region</strong>: Choose the region closest to you for ideal performance</li>
                <li><strong>Datacenter</strong>: Leave this as the default choice</li>
                <li><strong>Image</strong>: Leave this set to Ubuntu unless you're already familiar with Linux and want a different distribution.</li>
                <li><strong>Version</strong>: Leave this as the default choice.</li>
                <li><strong>Droplet Type</strong>: Choose the <em>Basic</em> option under <em>Shared CPU</em></li>
                <li><strong>CPU Options</strong>: Choose <em>Regular</em>, click the left arrow below, and select the $4 per month option.</li>
              </ul>
            </ol>
          </div>
          <div class="column">
            <figure>
              <img src="images/fig5_dropletCreate.png">
              <figcaption>Figure 5: Create droplet button</figcaption>
            </figure>
          </div>
        </div>
        <h3><li>Add an SSH key to the droplet.</li></h3>
        <ol>
          <li>Select <em>SSH Key</em> under the <em>Choose Authentication Method</em> section.</li>
          <li>Run the following command in your terminal to display the text of your SSH key.</li>
          <code>cat ~/.ssh/id_rsa.pub</code>
          <p class="feedback">
            The output should be a string of text starting with <em>ssh-rsa</em> and ending with <em>username@hostname</em>.
          </p>
          <li>Copy the full output of the previous command and paste it into the <em>SSH key content</em> box in DigitalOcean (<em>Figure 6</em>).</li>
          <li>Choose a name for your key and type it in the <em>Name</em> box.</li>
          <li>Click <em>Add SSH Key</em></li>
          <li>Make sure the key you just added has a checkmark next to it under <em>Choose your SSH Keys</em>.</li>
          <figure>
            <img src="images/fig6_sshDialog.png">
            <figcaption>Figure 6: SSH dialog box</figcaption>
          </figure>
        </ol>
        <h3><li>Create the droplet.</li></h3>
        <ol>
          <li>Choose a short, descriptive name for your droplet and type it in the <em>Hostname</em> box at the bottom of the page.</li>
          <li>Click the <em>Create Droplet</em> button at the bottom of the screen.</li>
          <p>You should be returned to the dashboard, where you will see your droplet being created (<em>Figure 7</em>).</p>
          <figure>
            <img src="images/fig7_newDroplet.png">
            <figcaption>Figure 7: Newly created droplet in dashboard</figcaption>
          </figure>
        </ol>
      </ol>
      <h2><li>Server Setup</li></h2>
      <ol>
        <h3><li>Connect to the server.</li></h3>
        <ol>
          <p class="note">
            <strong>Note</strong>: Next to the name of your droplet is an IP address (E.g., 192.168.1.1). 
            If this doesn't appear automatically, you may need to refresh the page.  For the rest of this guide, you 
            should replace the text [ip-address] with your server's IP address in any commands or text files.
          </p>
          <li>Connect to the droplet by running the following command, replacing [ip-address] with your droplet's IP address.</li>
          <code>ssh root@[ip-address]</code>
          <p class="feedback">You should see a prompt that says <em>Are you sure you want to continue connecting(yes/no/fingerprint)?</em></p>
          <li>Type <em>yes</em> at the prompt and press enter.</li>
          <p class="feedback">The output shown in <em>Listing 2</em> should appear.</p>
          <figure>
          <code>
Welcome to Ubuntu 22.10 (GNU/Linux 5.19.0-23-generic x86_64)

 * Documentation: https://help.ubuntu.com  
 * Management: https://landscape.canonical.com  
 * Support: https://ubuntu.com/advantage

  System information as of Tue Mar 28 05:09:53 UTC 2023

  System load: 0.0 Users logged in: 0  
  Usage of /: 17.1% of 9.52GB IPv4 address for eth0: [ip-address]  
  Memory usage: 38% IPv4 address for eth0: 10.10.0.6  
  Swap usage: 0% IPv4 address for eth1: 10.136.0.2  
  Processes: 90

0 updates can be applied immediately.  



The programs included with the Ubuntu system are free software;  
the exact distribution terms for each program are described in the  
individual files in /usr/share/doc/*/copyright.  
Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by  
applicable law.
          </code>
          <figcaption>Listing 2: Server connection text</figcaption>
          </figure>
        </ol>
        <h3><li>Set up a user account.</li></h3>
        <ol>
          <li>Choose a username containing only letters, with no spaces or special characters.</li>
          <p class="note">
            <strong>Note</strong>: For the rest of this guide, replace [username] with the name you chose.
          </p>
          <li>Run the following command to create a user.</li>
          <code>adduser [username]</code>
          <li>Type a strong, memorable password when prompted.</li>
          <p class="note">
            <strong>Note</strong>: There will be no visible indication when typing your password.
          </p>
          <li>Press enter at each prompt for personal information.</li>
          <p class="feedback">A prompt should appear that says <em>Is the information correct?</em></p>
          <li>Type <em>y</em> and press enter.</li>
          <p class="feedback">If the command was successful, there will be no further output.</p>
          <li>Run the following command to give the user admin privileges.</li>
          <code>usermod -aG sudo [username]</code>
          <p class="feedback">There should be no output.</p>
          <li>Allow remote access to the user by running the following command.</li>
          <code>rsync --archive --chown=[username]:[username] ~/.ssh/home/[username]</code>
          <p class="feedback">Again, you should see no output.</p>
        </ol>
        <h3><li>Reconnect to the server with your user account.</li></h3>
        <ol>
          <li>Run the command <em>exit</em> to disconnect from the server.</li>
          <li>Run the following command to reconnect as the user account.</li>
          <code>ssh [username]@[ip-address]</code>
          <p class="note"><strong>Note</strong>: This is the command you should use any time you need to connect in the future.</p>
        </ol>
        <h3><li>Install Nginx.</li></h3>
        <ol>
          <li>Run the following command to update the server's package list.</li>
          <code>sudo apt update</code>
          <p class="feedback">After some time, you should see output that looks like <em>Listing 3</em></p>
          <figure>
            <code>
Fetched 1672 kB in 4s (441 kB/s)
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
33 packages can be upgraded. Run 'apt list --upgradable' to see them.
            </code>
            <figcaption>Listing 3: apt update output</figcaption>
          </figure>
          <li>Install Nginx with the following command.</li>
          <code>sudo apt install nginx</code>
          <p class="feedback">
            A prompt should appear that says <em>Do you want to continue? [Y/n]</em>.
          </p>
          <li>Type <em>y</em> and press enter.</li>
          <p class="feedback">The server will take some time to install, and output will vary depending on your system.</p>
        </ol>
        <h3><li>Test Nginx.</li></h3>
        <p>Paste your server's IP address into the address bar of your web browser.</p>
        <p class="feedback">If your server has been set up properly, you should see the page shown in <em>Figure 8</em>.</p>
        <figure>
          <img src="images/fig8_nginxHomepage.png">
          <figcaption>Figure 8: Nginx initial setup page</figcaption>
        </figure>
      </ol>
      <h2><li>Domain Name Setup</li></h2>
      <h2><li>Nginx Configuration</li></h2>
      <h2><li>TLS Setup</li></h2>
      <h2><li>Website File Upload</li></h2>
    </ol>
    <h1>Conclustion</h1>
  </body>
</html>
